{% extends "gestion/base_gestion.html" %}
{% load static %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">{{ titulo }}</h1>
    </div>

    <!-- Tarjetas de estadísticas -->
    <div class="row g-3 mb-4">
        <div class="col-lg-3">
            <div class="card stats-card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="mb-1">Total Alumnos</h6>
                            <h3 class="mb-0">{{ total_alumnos|default:"0" }}</h3>
                        </div>
                        <i class="fa fa-users fa-2x text-primary"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="card stats-card bg-success">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="mb-1">Total Pagos</h6>
                            <h3 class="mb-0">{{ total_pagos|default:"0" }}</h3>
                        </div>
                        <i class="fa fa-money fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="card stats-card bg-info">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="mb-1">Total Asistencias</h6>
                            <h3 class="mb-0">{{ total_asistencias|default:"0" }}</h3>
                        </div>
                        <i class="fa fa-calendar-check fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="card stats-card bg-warning">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="mb-1">Total Gastos</h6>
                            <h3 class="mb-0">{{ total_gastos|default:"0" }}</h3>
                        </div>
                        <i class="fa fa-receipt fa-2x"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sección de Exportaciones -->
    <div class="row">
        <!-- Exportar Alumnos -->
        <div class="col-lg-6 mb-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fa fa-users text-primary"></i>
                        Exportar Alumnos
                    </h5>
                </div>
                <div class="card-body">
                    <p class="text-muted">Exporta la lista completa de alumnos con filtros opcionales.</p>
                    
                    <form method="get" action="{% url 'reportes:exportar_alumnos' %}" class="mb-3">
                        <div class="row g-2">
                            <div class="col-md-4">
                                <label class="form-label">Estado</label>
                                <select name="estado" class="form-select">
                                    <option value="">Todos</option>
                                    <option value="activo">Activos</option>
                                    <option value="inactivo">Inactivos</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Curso</label>
                                <select name="curso" class="form-select">
                                    <option value="">Todos</option>
                                    <optgroup label="Primaria">
                                        <option value="1P">1º Primaria</option>
                                        <option value="2P">2º Primaria</option>
                                        <option value="3P">3º Primaria</option>
                                        <option value="4P">4º Primaria</option>
                                        <option value="5P">5º Primaria</option>
                                        <option value="6P">6º Primaria</option>
                                    </optgroup>
                                    <optgroup label="E.S.O">
                                        <option value="1E">1º E.S.O</option>
                                        <option value="2E">2º E.S.O</option>
                                        <option value="3E">3º E.S.O</option>
                                        <option value="4E">4º E.S.O</option>
                                    </optgroup>
                                    <optgroup label="Bachillerato">
                                        <option value="1B">1º Bachillerato</option>
                                        <option value="2B">2º Bachillerato</option>
                                    </optgroup>
                                    <optgroup label="Otros">
                                        <option value="FP">FP</option>
                                        <option value="AD">Adultos</option>
                                        <option value="EB">EBAU</option>
                                        <option value="EO">EOI</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Compartido</label>
                                <select name="compartido" class="form-select">
                                    <option value="">Todos</option>
                                    <option value="compartido">Compartidos</option>
                                    <option value="individual">Individuales</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-3">
                            <button type="submit" class="btn btn-primary">
                                <i class="fa fa-download"></i> Exportar Alumnos
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Exportar Pagos -->
        <div class="col-lg-6 mb-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fa fa-money text-success"></i>
                        Exportar Pagos
                    </h5>
                </div>
                <div class="card-body">
                    <p class="text-muted">Exporta el historial de pagos con filtros por fecha y profesor.</p>
                    
                    <form method="get" action="{% url 'reportes:exportar_pagos' %}" class="mb-3">
                        <div class="row g-2">
                            <div class="col-md-6">
                                <label class="form-label">Fecha Inicio</label>
                                <input type="date" name="fecha_inicio" class="form-control">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Fecha Fin</label>
                                <input type="date" name="fecha_fin" class="form-control">
                            </div>
                        </div>
                        <div class="mt-3">
                            <button type="submit" class="btn btn-success">
                                <i class="fa fa-download"></i> Exportar Pagos
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Exportar Asistencias -->
        <div class="col-lg-6 mb-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fa fa-calendar-check text-info"></i>
                        Exportar Asistencias
                    </h5>
                </div>
                <div class="card-body">
                    <p class="text-muted">Exporta el registro de asistencias con filtros por fecha y horario.</p>
                    
                    <form method="get" action="{% url 'reportes:exportar_asistencias' %}" class="mb-3">
                        <div class="row g-2">
                            <div class="col-md-6">
                                <label class="form-label">Fecha Inicio</label>
                                <input type="date" name="fecha_inicio" class="form-control">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Fecha Fin</label>
                                <input type="date" name="fecha_fin" class="form-control">
                            </div>
                        </div>
                        <div class="mt-3">
                            <button type="submit" class="btn btn-info">
                                <i class="fa fa-download"></i> Exportar Asistencias
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Exportar Gastos -->
        <div class="col-lg-6 mb-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fa fa-receipt text-warning"></i>
                        Exportar Gastos
                    </h5>
                </div>
                <div class="card-body">
                    <p class="text-muted">Exporta el registro de gastos con filtros por fecha y categoría.</p>
                    
                    <form method="get" action="{% url 'reportes:exportar_gastos' %}" class="mb-3">
                        <div class="row g-2">
                            <div class="col-md-6">
                                <label class="form-label">Fecha Inicio</label>
                                <input type="date" name="fecha_inicio" class="form-control">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Fecha Fin</label>
                                <input type="date" name="fecha_fin" class="form-control">
                            </div>
                        </div>
                        <div class="mt-3">
                            <button type="submit" class="btn btn-warning">
                                <i class="fa fa-download"></i> Exportar Gastos
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Información adicional -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fa fa-info-circle text-primary"></i>
                        Información sobre las Exportaciones
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Características de los archivos Excel:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fa fa-check text-success"></i> Formato profesional con encabezados coloreados</li>
                                <li><i class="fa fa-check text-success"></i> Columnas ajustadas automáticamente</li>
                                <li><i class="fa fa-check text-success"></i> Filtros aplicados según selección</li>
                                <li><i class="fa fa-check text-success"></i> Nombres de archivo con fecha y hora</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>Uso recomendado:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fa fa-arrow-right text-primary"></i> Análisis de datos en Excel</li>
                                <li><i class="fa fa-arrow-right text-primary"></i> Generación de reportes</li>
                                <li><i class="fa fa-arrow-right text-primary"></i> Backup de información</li>
                                <li><i class="fa fa-arrow-right text-primary"></i> Compartir con otros departamentos</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 